<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>User Profile</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">


  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <link href="/public/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
  <link href="/public/css/tiny-slider.css" rel="stylesheet">
  <link href="/public/css/style.css" rel="stylesheet">
  <title>Furni Free Bootstrap 5 Template for Furniture and Interior Design Websites by Untree.co </title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/2.1.2/sweetalert.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  
</head>

<body>
  <nav class="custom-navbar navbar navbar navbar-expand-md navbar-dark bg-dark " arial-label="Furni navigation bar">

    <div class="container ">
      <a class="navbar-brand mx-auto" href="/">Furni<span>.</span></a>
    </div>

  </nav>
  <!-- End Header/Navigation -->

  <div class="container mt-5">
    <div class="row">
      <div class="col-3">
        <!-- Tab navs -->
        <div class="nav flex-column nav-pills text-center" id="v-pills-tab" role="tablist" aria-orientation="vertical">
          <a data-mdb-pill-init class="nav-link active" id="v-pills-home-tab" href="#v-pills-home" role="tab"
            aria-controls="v-pills-home" data-bs-toggle="pill" aria-selected="true">Home</a>
          <a data-mdb-pill-init class="nav-link" id="v-pills-profile-tab" href="#v-pills-profile" role="tab"
            aria-controls="v-pills-profile" data-bs-toggle="pill" aria-selected="false">Profile</a>
          <a data-mdb-pill-init class="nav-link" id="v-pills-address-tab" href="#v-pills-address" role="tab"
            aria-controls="v-pills-address" data-bs-toggle="pill" aria-selected="false">Address</a>
          <a data-mdb-pill-init class="nav-link" id="v-pills-addAddress-tab" href="#v-pills-addAddress" role="tab"
            aria-controls="v-pills-addAddress" data-bs-toggle="pill" aria-selected="false">Add Address</a>
          <a data-mdb-pill-init class="nav-link" id="v-pills-changepassword-tab" href="#v-pills-changepassword" role="tab"
            aria-controls="v-pills-changepassword" data-bs-toggle="pill" aria-selected="false">Change Password</a>
          <a data-mdb-pill-init class="nav-link" id="v-pills-logout-tab" role="tab" style="cursor: pointer;"
            aria-controls="v-pills-logout" aria-selected="false">Sign Out</a>
          <a data-mdb-pill-init class="nav-link" id="v-pills-hhh-tab" href="/" role="tab" aria-controls="v-pills-hhh"
            aria-selected="false">Hhh</a>
        </div>
        <!-- Tab navs -->
      </div>

      <div class="col-9">
        <!-- Tab content -->
        <div class="tab-content" id="v-pills-tabContent">
          <div class="tab-pane fade show active" id="v-pills-home" role="tabpanel" aria-labelledby="v-pills-home-tab">
            Home content
          </div>
          <div class="tab-pane fade" id="v-pills-profile" role="tabpanel" aria-labelledby="v-pills-profile-tab">
            <!-- Add profile content -->
            <div class="col-md-4">
              <div class="col-md-6">
                <img src="/public/images/person_1.jpg" class="img-fluid" alt="User Image">
              </div>
              <h2 class="mt-3">
                <%= userProfile.name %>
              </h2>
              <h5>Mob :<%= userProfile.mobile %>
              </h5>
              <h5>Email : <%= userProfile.email %>
              </h5>
              <a href="#" class="btn btn-primary editButton" data-bs-toggle="modal"
                    data-bs-target="#editModal<%= userProfile._id %>">Edit</a>
            </div>
          </div>
          <!-- userprofile edit Modal starts  -->
            <div class="modal fade" id="editModal<%= userProfile._id %>" tabindex="-1" aria-labelledby="editModalLabel"
              aria-hidden="true">
              <div class="modal-dialog">
                <div class="modal-content">
                  <!-- Modal content -->
                  <div class="modal-header">
                    <h5 class="modal-title" id="editModalLabel">Edit Profile</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body">
                    <!-- Form for editing user details -->
                    <form action="/updateProfile" method="post">
                      <div class="mb-3">
                        <label for="editName" class="form-label">Name</label>
                        <input type="hidden" value="<%= userProfile._id %>" name="id">
                        <input type="text" class="form-control" name="name" id="editName" value="<%= userProfile.name %>"
                          required>
                      </div>
                      <div class="mb-3">
                        <label for="editMobile" class="form-label">Mobile</label>
                        <input type="text" class="form-control" name="mobile" id="editMobile"
                          value="<%= userProfile.mobile %>" required>
                      </div>
                      <div class="mb-3">
                        <label for="editemail" class="form-label">Email</label>
                        <input type="text" class="form-control" name="email" id="editemail" value="<%= userProfile.email %>"
                          required>
                      </div>
                      <button type="submit" class="btn btn-primary">Save</button>
                    </form>
                  </div>
                </div>
              </div>
            </div>
            <!-- userprofile modal ends here  -->

          <!-- address  start-->
          <div class="tab-pane fade" id="v-pills-address" role="tabpanel" aria-labelledby="v-pills-address-tab">
            <div class="card" style="width: 18rem;">
              <% viewAddress.forEach(function(address){ %>
                <div class="card-body">
                  <h5 class="card-title">
                    <%= address.name %>
                  </h5>
                  <p class="card-text">
                    <%= address.address %>
                  </p>
                  <p class="card-text"><strong>State :</strong>
                    <%= address.state %>
                  </p>
                  <p class="card-text"><strong>Mobile :</strong>
                    <%= address.mobile %>
                  </p>
                  <!-- Edit button with unique identifier -->
                  <a href="#" class="btn btn-primary editButton" data-bs-toggle="modal"
                    data-bs-target="#editModal<%= address._id %>">Edit</a>
                  <a href="/deleteAddress/<%= address._id %>" class="btn btn-primary ms-3" id="deleteButton" name="id"
                    value="<%= address._id %>">Delete</a>
                  <hr>
                </div>
                <% }) %>
            </div>
          </div>
          <!-- addrress end  -->

          <!-- Modal for editing address -->
          <% viewAddress.forEach(function(address){ %>
            <div class="modal fade" id="editModal<%= address._id %>" tabindex="-1" aria-labelledby="editModalLabel"
              aria-hidden="true">
              <div class="modal-dialog">
                <div class="modal-content">
                  <!-- Modal content -->
                  <div class="modal-header">
                    <h5 class="modal-title" id="editModalLabel">Edit Address</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body">
                    <!-- Form for editing address details -->
                    <form action="/updateAddress" method="post">
                      <div class="mb-3">
                        <label for="editName" class="form-label">Name</label>
                        <input type="hidden" value="<%= address._id %>" name="id">
                        <input type="text" class="form-control" name="name" id="editName" value="<%= address.name %>"
                          required>
                      </div>
                      <div class="mb-3">
                        <label for="editAddress" class="form-label">Address</label>
                        <input type="text" class="form-control" name="address" id="editAddress"
                          value="<%= address.address %>" required>
                      </div>
                      <div class="mb-3">
                        <label for="editState" class="form-label">State</label>
                        <input type="text" class="form-control" name="state" id="editState" value="<%= address.state %>"
                          required>
                      </div>
                      <div class="mb-3">
                        <label for="editMobile" class="form-label">Mobile</label>
                        <input type="text" class="form-control" name="mobile" id="editMobile"
                          value="<%= address.mobile %>" required>
                      </div>
                      <div class="mb-3">
                        <label for="editlocality" class="form-label">City/Town</label>
                        <input type="text" class="form-control" name="locality" id="locality"
                          value="<%= address.locality %>" required>
                      </div>
                      <div class="mb-3">
                        <label for="editpincode" class="form-label">Pincode</label>
                        <input type="text" class="form-control" name="pincode" id="editpincode"
                          value="<%= address.pincode %>" required>
                      </div>
                      <div class="mb-3">
                        <label for="editpost" class="form-label">Post</label>
                        <input type="text" class="form-control" name="post" id="editpost" value="<%= address.post %>"
                          required>
                      </div>
                      <button type="submit" class="btn btn-primary">Save</button>
                    </form>
                  </div>
                </div>
              </div>
            </div>
            <% }) %>


              <!-- addAddress start -->
              <div class="tab-pane fade" id="v-pills-addAddress" role="tabpanel"
                aria-labelledby="v-pills-addAddress-tab">
                <div>
                  <form action="/addAddress" method="post">
                    <div class="form-row">
                      <div class="form-group col-md-6">
                        <label for="name">Name</label>
                        <input type="text" class="form-control" name="name" id="name" placeholder="Name" required
                          minlength="5">
                      </div>
                      <div class="form-group col-md-6">
                        <label for="mobile">Mobile</label>
                        <input type="text" class="form-control" name="mobile" id="mobile" placeholder="mobile" required
                          pattern="\d{10}" title="Mobile number must be 10 digits">
                      </div>
                    </div>
                    <div class="form-group">
                      <label for="inputAddress">Address</label>
                      <input type="text" class="form-control" name="address" id="inputAddress" placeholder="address"
                        required>
                    </div>
                    <div class="form-row">
                      <div class="form-group col-md-6">
                        <label for="inputCity">City/Town</label>
                        <input type="text" class="form-control" id="inputCity" name="locality" placeholder="locality"
                          required>
                      </div>
                      <div class="form-group col-md-4">
                        <label for="inputState">State</label>
                        <select id="inputState" name="state" class="form-control" required>
                          <option selected>Select Your State...</option>
                          <option value="Andhra Pradesh">Andhra Pradesh</option>
                          <option value="Andaman and Nicobar Islands">Andaman and Nicobar Islands</option>
                          <option value="Arunachal Pradesh">Arunachal Pradesh</option>
                          <option value="Assam">Assam</option>
                          <option value="Bihar">Bihar</option>
                          <option value="Chandigarh">Chandigarh</option>
                          <option value="Chhattisgarh">Chhattisgarh</option>
                          <option value="Dadar and Nagar Haveli">Dadar and Nagar Haveli</option>
                          <option value="Daman and Diu">Daman and Diu</option>
                          <option value="Delhi">Delhi</option>
                          <option value="Lakshadweep">Lakshadweep</option>
                          <option value="Puducherry">Puducherry</option>
                          <option value="Goa">Goa</option>
                          <option value="Gujarat">Gujarat</option>
                          <option value="Haryana">Haryana</option>
                          <option value="Himachal Pradesh">Himachal Pradesh</option>
                          <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                          <option value="Jharkhand">Jharkhand</option>
                          <option value="Karnataka">Karnataka</option>
                          <option value="Kerala">Kerala</option>
                          <option value="Madhya Pradesh">Madhya Pradesh</option>
                          <option value="Maharashtra">Maharashtra</option>
                          <option value="Manipur">Manipur</option>
                          <option value="Meghalaya">Meghalaya</option>
                          <option value="Mizoram">Mizoram</option>
                          <option value="Nagaland">Nagaland</option>
                          <option value="Odisha">Odisha</option>
                          <option value="Punjab">Punjab</option>
                          <option value="Rajasthan">Rajasthan</option>
                          <option value="Sikkim">Sikkim</option>
                          <option value="Tamil Nadu">Tamil Nadu</option>
                          <option value="Telangana">Telangana</option>
                          <option value="Tripura">Tripura</option>
                          <option value="Uttar Pradesh">Uttar Pradesh</option>
                          <option value="Uttarakhand">Uttarakhand</option>
                          <option value="West Bengal">West Bengal</option>

                        </select>
                      </div>
                      <div class="row">
                        <div class="form-group col-md-3">
                          <label for="Post">Post</label>
                          <input type="text" class="form-control" name="post" id="post" required>
                        </div>
                        <div class="form-group col-md-2">
                          <label for="pincode">Pin code</label>
                          <input type="text" class="form-control" name="pincode" id="pincode" required pattern="\d{6}"
                            title="Pin code must be 6 digits">
                        </div>
                      </div>
                    </div>

                    <br>
                    <button type="submit" class="btn btn-primary">Save </button>
                  </form>
                </div>
              </div>
              <!-- addAddress end -->

              <!-- Start Change password -->
              <div class="tab-pane fade" id="v-pills-changepassword" role="tabpanel" aria-labelledby="v-pills-changepassword-tab">
                
                <div class="container mt-5">
                  <div class="row justify-content-center">
                    <div class="col-md-6">
                      <div class="card">
                        <div class="card-header">
                          <h4>Change Password</h4>
                        </div>
                        <div class="card-body">
                          <form id="changePasswordForm" method="post" action="/changeUserPassword" onsubmit="return validateForm()">
                            <div class="form-group">
                              <label for="currentPassword">Current Password</label>
                              <input type="password" class="form-control" id="currentPassword" name="currentpassword" required>
                            </div>
                            <div class="form-group">
                              <label for="newPassword">New Password</label>
                              <input type="password" class="form-control" id="newPassword" name="newpassword" required>
                            </div>
                            <div class="form-group">
                              <label for="confirmPassword">Confirm New Password</label>
                              <input type="password" class="form-control" id="confirmPassword" name="confirmpassword" required>
                            </div>
                            <button type="submit" class="btn btn-success">Change Password</button>
                          </form>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              
              </div>

        </div>
        <!-- Tab content -->
      </div>
    </div>
  </div>

  <!-- Start Footer Section -->
  <footer class="footer-section ">
    <div class="container relative">


      <div class="row g-5 mb-5">
        <div class="col-lg-4">
          <div class="mb-4 footer-logo-wrap"><a href="#" class="footer-logo">Furni<span>.</span></a></div>
          <p class="mb-4">Donec facilisis quam ut purus rutrum lobortis. Donec vitae odio quis nisl dapibus malesuada.
            Nullam ac aliquet velit. Aliquam vulputate velit imperdiet dolor tempor tristique. Pellentesque habitant</p>

          <ul class="list-unstyled custom-social">
            <li><a href="#"><span class="fa fa-brands fa-facebook-f"></span></a></li>
            <li><a href="#"><span class="fa fa-brands fa-twitter"></span></a></li>
            <li><a href="#"><span class="fa fa-brands fa-instagram"></span></a></li>
            <li><a href="#"><span class="fa fa-brands fa-linkedin"></span></a></li>
          </ul>
        </div>

        <div class="col-lg-8">
          <div class="row links-wrap">
            <div class="col-6 col-sm-6 col-md-3">
              <ul class="list-unstyled">
                <li><a href="#">About us</a></li>
                <li><a href="#">Services</a></li>
                <li><a href="#">Blog</a></li>
                <li><a href="#">Contact us</a></li>
              </ul>
            </div>

            <div class="col-6 col-sm-6 col-md-3">
              <ul class="list-unstyled">
                <li><a href="#">Support</a></li>
                <li><a href="#">Knowledge base</a></li>
                <li><a href="#">Live chat</a></li>
              </ul>
            </div>

            <div class="col-6 col-sm-6 col-md-3">
              <ul class="list-unstyled">
                <li><a href="#">Jobs</a></li>
                <li><a href="#">Our team</a></li>
                <li><a href="#">Leadership</a></li>
                <li><a href="#">Privacy Policy</a></li>
              </ul>
            </div>

            <div class="col-6 col-sm-6 col-md-3">
              <ul class="list-unstyled">
                <li><a href="#">Nordic Chair</a></li>
                <li><a href="#">Kruzo Aero</a></li>
                <li><a href="#">Ergonomic Chair</a></li>
              </ul>
            </div>
          </div>
        </div>

      </div>

      <div class="border-top copyright">
        <div class="row pt-4">
          <div class="col-lg-6">
            <p class="mb-2 text-center text-lg-start">Copyright &copy;
              <script>document.write(new Date().getFullYear());</script>. All Rights Reserved. &mdash; Designed with
              love by <a href="https://untree.co">Untree.co</a> Distributed By <a
                hreff="https://themewagon.com">ThemeWagon</a> <!-- License information: https://untree.co/license/ -->
            </p>
          </div>

          <div class="col-lg-6 text-center text-lg-end">
            <ul class="list-unstyled d-inline-flex ms-auto">
              <li class="me-4"><a href="#">Terms &amp; Conditions</a></li>
              <li><a href="#">Privacy Policy</a></li>
            </ul>
          </div>

        </div>
      </div>

    </div>
  </footer>
  <!-- End Footer Section -->

  <script>
    function validateForm() {
      let currentPassword = document.getElementById("currentPassword").value;
      let newPassword = document.getElementById("newPassword").value;
      let confirmPassword = document.getElementById("confirmPassword").value;

      if (newPassword !== confirmPassword) {
        alert("New password and confirm password do not match.");
        return false;
      }

      // You can add additional validation rules here, e.g., minimum password length, complexity requirements, etc.

      return true;
    }
  </script>


<script>
  document.getElementById('v-pills-logout-tab').addEventListener('click', async () => {
    const result = await Swal.fire({
      title: 'Are you sure?',
      text: "Do you really want to sign out?",
      icon: 'warning',
      showCancelButton: true,
      confirmButtonColor: '#3085d6',
      cancelButtonColor: '#d33',
      timer:3000,
      confirmButtonText: 'Yes, sign me out!'
    });

    if (result.isConfirmed) {
      // Send a request to the back-end to sign out
      const response = await fetch('/logout', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        }
      });

      if (response.ok) {
        Swal.fire(
          'Signed out!',
          'You have been signed out successfully.',
          'success'
        ).then(() => {
          window.location.href = '/';
        });
      } else {
        Swal.fire(
          'Error!',
          'There was a problem signing you out. Please try again.',
          'error'
        );
      }
    }
  });
</script>



<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>

</body>

</html>